# Docker Compose for local development and testing
version: '3.8'

services:
  opera-monitor:
    build: .
    container_name: opera-ticket-monitor
    restart: unless-stopped
    environment:
      - SENDER_EMAIL=${SENDER_EMAIL}
      - SENDER_PASSWORD=${SENDER_PASSWORD}
    volumes:
      # Persist state between restarts
      - ./data:/app/data
      - ./opera_monitor.log:/app/opera_monitor.log
    # For debugging
    # command: python -c "from monitor import OperaTicketMonitor; import asyncio; m = OperaTicketMonitor(); asyncio.run(m.run_once())"
